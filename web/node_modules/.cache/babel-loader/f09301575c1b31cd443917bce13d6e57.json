{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\DeviceSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\DeviceSettings.vue","mtime":1593307092858},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'AddNewProduct',\n  data: function data() {\n    return {\n      // options: regionData,\n      form: {\n        point: [{\n          cp_id: 'cp1',\n          cp_name: '',\n          unit: '',\n          up: '',\n          down: '',\n          limit_up: '',\n          limit_down: ''\n        }],\n        eq: ''\n      }\n    };\n  },\n  created: function created() {// this.fetchCaseInfo();\n  },\n  methods: {\n    addNewPoint: function addNewPoint() {\n      if (this.form.point.length > 5) {\n        this.$message.error('最多创建6个测点');\n        return;\n      }\n\n      this.form.point.push({\n        cp_id: 'cp' + (this.form.point.length + 1),\n        cp_name: '',\n        unit: '',\n        up: '',\n        down: '',\n        limit_up: '',\n        limit_down: ''\n      });\n    },\n    deletePoint: function deletePoint() {\n      if (this.form.point.length == 1) {\n        return;\n      }\n\n      this.form.point.pop();\n    },\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.form.eq = this.$route.query;\n      window.console.log(this.form.eq);\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          axios({\n            method: 'post',\n            url: '/device/settings',\n            data: _this.form\n          }).then(function (res) {\n            console.log(res.data);\n\n            if (res.data.success) {\n              _this.$message.success(res.data.message);\n\n              _this.$router.push('/deviceList');\n            }\n          }).catch(function (err) {});\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["DeviceSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,KADA;AAEA,UAAA,OAAA,EAAA,EAFA;AAGA,UAAA,IAAA,EAAA,EAHA;AAIA,UAAA,EAAA,EAAA,EAJA;AAKA,UAAA,IAAA,EAAA,EALA;AAMA,UAAA,QAAA,EAAA,EANA;AAOA,UAAA,UAAA,EAAA;AAPA,SADA,CADA;AAYA,QAAA,EAAA,EAAA;AAZA;AAFA,KAAA;AAiBA,GApBA;AAqBA,EAAA,OArBA,qBAqBA,CACA;AACA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,UAAA,KAAA,IAAA,CAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,QAAA,KAAA,EAAA,QAAA,KAAA,IAAA,CAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,IAAA,EAAA,EAHA;AAIA,QAAA,EAAA,EAAA,EAJA;AAKA,QAAA,IAAA,EAAA,EALA;AAMA,QAAA,QAAA,EAAA,EANA;AAOA,QAAA,UAAA,EAAA;AAPA,OAAA;AASA,KAfA;AAgBA,IAAA,WAhBA,yBAgBA;AACA,UAAA,KAAA,IAAA,CAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA;AACA;;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,GAAA;AACA,KArBA;AAsBA,IAAA,UAtBA,sBAsBA,QAtBA,EAsBA;AAAA;;AACA,WAAA,IAAA,CAAA,EAAA,GAAA,KAAA,MAAA,CAAA,KAAA;AAEA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA;AACA,YAAA,MAAA,EAAA,MADA;AAEA,YAAA,GAAA,EAAA,kBAFA;AAGA,YAAA,IAAA,EAAA,KAAA,CAAA;AAHA,WAAA,CAAA,CAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;;AACA,gBAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA;;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA;AACA,WAXA,EAYA,KAZA,CAYA,UAAA,GAAA,EAAA,CAAA,CAZA;AAaA,SAdA,MAcA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,iBAAA,KAAA;AACA;AACA,OAnBA;AAoBA;AA9CA;AAxBA,CAAA","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2020-06-12 09:13:08\r\n * @LastEditTime: 2020-06-28 01:53:50\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\web\\src\\components\\deviceRecord\\DeviceSettings.vue\r\n--> \r\n<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-calendar\"></i> 设备档案\r\n                </el-breadcrumb-item>\r\n                <el-breadcrumb-item>测点配置</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"form-box\">\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\r\n                    <div v-for=\"(item, index) in form.point\" :key=\"index\" class=\"point\">\r\n                        <p class=\"point-title\">测点{{index +1}}</p>\r\n                        <el-form-item label=\"测点标识号\">\r\n                            <el-input v-model=\"item.cp_id\" disabled></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"测点名称\"\r\n                            :prop=\"'point.'+ index  + '.cp_name'\"\r\n                            :rules=\"{\r\n      required: true, message: '测点名称不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.cp_name\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"测点单位\"\r\n                            :prop=\"'point.'+ index  + '.unit'\"\r\n                            :rules=\"{\r\n      required: true, message: '测点单位不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.unit\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- <el-form-item\r\n                            label=\"计算系数值\"\r\n                            :prop=\"'point.'+ index  + '.k'\"\r\n                            :rules=\"{\r\n      required: true, message: '计算系数值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.k\"></el-input>\r\n                        </el-form-item>-->\r\n                        <el-form-item\r\n                            label=\"量程上限值\"\r\n                            :prop=\"'point.'+ index  + '.up'\"\r\n                            :rules=\"{\r\n      required: true, message: '量程上限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.up\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"量程下限值\"\r\n                            :prop=\"'point.'+ index  + '.down'\"\r\n                            :rules=\"{\r\n      required: true, message: '量程下限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.down\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"报警上限值\"\r\n                            :prop=\"'point.'+ index  + '.limit_up'\"\r\n                            :rules=\"{\r\n      required: true, message: '上限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.limit_up\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"报警下限值\"\r\n                            :prop=\"'point.'+ index  + '.limit_down'\"\r\n                            :rules=\"{\r\n      required: true, message: '下限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.limit_down\"></el-input>\r\n                        </el-form-item>\r\n                    </div>\r\n                    <div style=\"text-align: right\">\r\n                        <el-button @click=\"submitForm('form')\">提交</el-button>\r\n                        <div style=\"text-align: center\">\r\n                            <el-button @click=\"addNewPoint\">新增</el-button>\r\n                            <el-button @click=\"deletePoint\">删除</el-button>\r\n                        </div>\r\n                    </div>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'AddNewProduct',\r\n    data() {\r\n        return {\r\n            // options: regionData,\r\n            form: {\r\n                point: [\r\n                    {\r\n                        cp_id: 'cp1',\r\n                        cp_name: '',\r\n                        unit: '',\r\n                        up: '',\r\n                        down: '',\r\n                        limit_up: '',\r\n                        limit_down: ''\r\n                    }\r\n                ],\r\n                eq: ''\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        // this.fetchCaseInfo();\r\n    },\r\n    methods: {\r\n        addNewPoint() {\r\n            if (this.form.point.length > 5) {\r\n                this.$message.error('最多创建6个测点');\r\n                return;\r\n            }\r\n            this.form.point.push({\r\n                cp_id: 'cp' + (this.form.point.length + 1),\r\n                cp_name: '',\r\n                unit: '',\r\n                up: '',\r\n                down: '',\r\n                limit_up: '',\r\n                limit_down: ''\r\n            });\r\n        },\r\n        deletePoint() {\r\n            if (this.form.point.length == 1) {\r\n                return;\r\n            }\r\n            this.form.point.pop();\r\n        },\r\n        submitForm(formName) {\r\n            this.form.eq = this.$route.query;\r\n\r\n            window.console.log(this.form.eq);\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    axios({\r\n                        method: 'post',\r\n                        url: '/device/settings',\r\n                        data: this.form\r\n                    })\r\n                        .then(res => {\r\n                            console.log(res.data);\r\n                            if (res.data.success) {\r\n                                this.$message.success(res.data.message);\r\n                                this.$router.push('/deviceList');\r\n                            }\r\n                        })\r\n                        .catch(err => {});\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.form-box {\r\n    margin: 0 auto;\r\n}\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n    border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n}\r\n.avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n}\r\n.point {\r\n    padding: 20px 25px 20px 0;\r\n    border: 1px solid #ebeef5;\r\n    border-radius: 4px;\r\n}\r\n.point-title {\r\n    font-size: 16px;\r\n    margin: 10px 0;\r\n    padding-left: 20px;\r\n}\r\n</style>"],"sourceRoot":"src/components/deviceRecord"}]}