{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\page\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\page\\Dashboard.vue","mtime":1590980248010},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Schart from 'vue-schart';\nimport bus from \"../common/bus\";\nexport default {\n  name: 'dashboard',\n  data: function data() {\n    return {\n      message: 'first',\n      showHeader: false,\n      unread: [{\n        date: '2018-04-19 20:00:00',\n        title: '设备1温度过高'\n      }, {\n        date: '2018-04-19 21:00:00',\n        title: '设备2温度过高'\n      }, {\n        date: '2018-04-19 21:00:00',\n        title: '设备3温度过高'\n      }, {\n        date: '2018-04-19 21:00:00',\n        title: '设备4温度过高'\n      }],\n      read: [{\n        date: '2018-04-19 20:00:00',\n        title: '设备1温度过高'\n      }],\n      recycle: [{\n        date: '2018-04-19 20:00:00',\n        title: '设备1温度过高'\n      }],\n      name: localStorage.getItem('ms_username'),\n      // todoList: [\n      //     {\n      //         title: '设备1温度过高',\n      //         status: false,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     },\n      //     {\n      //         title: '设备2温度过高',\n      //         status: true,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     },\n      //     {\n      //         title: '设备1断电',\n      //         status: false,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     },\n      //     {\n      //         title: '设备1故障',\n      //         status: false,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     },\n      //     {\n      //         title: '设备2故障',\n      //         status: true,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     },\n      //     {\n      //         title: '设备1故障',\n      //         status: false,\n      //         alarmTime: '2020-05-15 14:00:00'\n      //     }\n      //     // {\n      //     //     title: '设备2故障',\n      //     //     status: true,\n      //     //     alarmTime: '2020-05-15 14:00:00'\n      //     // },\n      //     // {\n      //     //     title: '设备2故障',\n      //     //     status: true,\n      //     //     alarmTime: '2020-05-15 14:00:00'\n      //     // },\n      //     // {\n      //     //     title: '设备1故障',\n      //     //     status: false,\n      //     //     alarmTime: '2020-05-15 14:00:00'\n      //     // },\n      //     // {\n      //     //     title: '设备2故障',\n      //     //     status: true,\n      //     //     alarmTime: '2020-05-15 14:00:00'\n      //     // }\n      // ],\n      options: {\n        type: 'line',\n        title: {\n          text: '最近一月设备报警数'\n        },\n        xRorate: 25,\n        labels: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30'],\n        datasets: [{\n          label: '设备',\n          data: [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2]\n        }]\n      },\n      options2: {\n        type: 'line',\n        title: {\n          text: '开机率/故障率趋势图'\n        },\n        labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n        datasets: [{\n          label: '开机率',\n          data: [78, 4, 15, 65, 89]\n        }, {\n          label: '故障率',\n          data: [4, 2, 2, 6, 5]\n        }]\n      },\n      options3: {\n        type: 'pie',\n        title: {\n          text: '设备地域分布'\n        },\n        legend: {\n          position: 'bottom'\n        },\n        bottomPadding: '10px',\n        labels: ['江苏'],\n        datasets: [{\n          data: [50]\n        }]\n      },\n      status: {},\n      deviceNum: 0\n    };\n  },\n  created: function created() {\n    this.fetchDeviceNum();\n    this.fetchDeviceStatus();\n  },\n  components: {\n    Schart: Schart\n  },\n  computed: {\n    unreadNum: function unreadNum() {\n      return this.unread.length;\n    },\n    role: function role() {\n      return this.name === 'admin' ? '超级管理员' : '普通用户';\n    }\n  },\n  // created() {\n  //     this.handleListener();\n  //     this.changeDate();\n  // },\n  // activated() {\n  //     this.handleListener();\n  // },\n  // deactivated() {\n  //     window.removeEventListener('resize', this.renderChart);\n  //     bus.$off('collapse', this.handleBus);\n  // },\n  methods: {\n    // changeDate() {\n    //     const now = new Date().getTime();\n    //     this.data.forEach((item, index) => {\n    //         const date = new Date(now - (6 - index) * 86400000);\n    //         item.name = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\n    //     });\n    // }\n    // handleListener() {\n    //     bus.$on('collapse', this.handleBus);\n    //     // 调用renderChart方法对图表进行重新渲染\n    //     window.addEventListener('resize', this.renderChart);\n    // },\n    // handleBus(msg) {\n    //     setTimeout(() => {\n    //         this.renderChart();\n    //     }, 200);\n    // },\n    // renderChart() {\n    //     this.$refs.bar.renderChart();\n    //     this.$refs.line.renderChart();\n    // }\n    //获取企业设备数量\n    fetchDeviceNum: function fetchDeviceNum() {\n      var _this = this;\n\n      axios({\n        method: 'get',\n        url: '/fetchDeviceNum'\n      }).then(function (res) {\n        _this.deviceNum = res.data.data;\n      }).catch();\n    },\n    //获取企业设备各种状态的数据\n    fetchDeviceStatus: function fetchDeviceStatus() {\n      var _this2 = this;\n\n      axios({\n        method: 'get',\n        url: '/fetchDeviceStatus'\n      }).then(function (res) {\n        _this2.status = res.data;\n      }).catch();\n    },\n    handleRead: function handleRead(index) {\n      var item = this.unread.splice(index, 1);\n      console.log(item);\n      this.read = item.concat(this.read);\n    },\n    handleDel: function handleDel(index) {\n      var item = this.read.splice(index, 1);\n      this.recycle = item.concat(this.recycle);\n    },\n    handleRestore: function handleRestore(index) {\n      var item = this.recycle.splice(index, 1);\n      this.read = item.concat(this.read);\n    }\n  }\n};",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\">\r\n                <el-row :gutter=\"24\" class=\"mgb20\">\r\n                    <el-col :span=\"12\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-1\">\r\n                                <i class=\"el-icon-monitor grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">{{deviceNum}}</div>\r\n                                    <div>设备数</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-2\">\r\n                                <i class=\"el-icon-video-play grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">{{status.yxs}}</div>\r\n                                    <div>运行数</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row :gutter=\"24\" class=\"mgb20\">\r\n                    <el-col :span=\"12\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-3\">\r\n                                <i class=\"el-icon-bell grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">{{status.gzs}}</div>\r\n                                    <div>故障数</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-4\">\r\n                                <i class=\"el-icon-video-pause grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">{{deviceNum-status.yxs}}</div>\r\n                                    <div>待机数</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-card shadow=\"hover\" style=\"height:460px;\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>设备类型</span>\r\n                    </div>\r\n                    <div class=\"schart-box\">\r\n                        <!-- <div class=\"content-title\">饼状图</div> -->\r\n                        <schart class=\"schart\" canvasId=\"pie\" :options=\"options3\"></schart>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n                <el-row :gutter=\"20\" class=\"mgb20\">\r\n                    <el-col :span=\"24\">\r\n                        <el-card shadow=\"hover\">\r\n                            <schart ref=\"bar\" class=\"schart\" canvasId=\"bar\" :options=\"options\"></schart>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row :gutter=\"20\">\r\n                    <el-col :span=\"24\">\r\n                        <el-card shadow=\"hover\" style=\"height:342px;\">\r\n                            <div slot=\"header\" class=\"clearfix\">\r\n                                <span>报警</span>\r\n                                <!-- <el-button style=\"float: right; padding: 3px 0\" type=\"text\">添加</el-button> -->\r\n                            </div>\r\n                            <el-tabs v-model=\"message\">\r\n                                <el-tab-pane :label=\"`未读消息(${unread.length})`\" name=\"first\">\r\n                                    <el-table\r\n                                        :data=\"unread\"\r\n                                        :show-header=\"false\"\r\n                                        style=\"width: 100%\"\r\n                                    >\r\n                                        <el-table-column>\r\n                                            <template slot-scope=\"scope\">\r\n                                                <span class=\"message-title\">{{scope.row.title}}</span>\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                        <el-table-column prop=\"date\" width=\"180\"></el-table-column>\r\n                                        <el-table-column width=\"120\">\r\n                                            <template slot-scope=\"scope\">\r\n                                                <el-button\r\n                                                    size=\"small\"\r\n                                                    @click=\"handleRead(scope.$index)\"\r\n                                                >标为已读</el-button>\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                    </el-table>\r\n                                    <!-- <div class=\"handle-row\">\r\n                                        <el-button type=\"primary\">全部标为已读</el-button>\r\n                                    </div>-->\r\n                                </el-tab-pane>\r\n                                <el-tab-pane :label=\"`已读消息(${read.length})`\" name=\"second\">\r\n                                    <template v-if=\"message === 'second'\">\r\n                                        <el-table\r\n                                            :data=\"read\"\r\n                                            :show-header=\"false\"\r\n                                            style=\"width: 100%\"\r\n                                        >\r\n                                            <el-table-column>\r\n                                                <template slot-scope=\"scope\">\r\n                                                    <span class=\"message-title\">{{scope.row.title}}</span>\r\n                                                </template>\r\n                                            </el-table-column>\r\n                                            <el-table-column prop=\"date\" width=\"150\"></el-table-column>\r\n                                            <el-table-column width=\"120\">\r\n                                                <template slot-scope=\"scope\">\r\n                                                    <el-button\r\n                                                        type=\"danger\"\r\n                                                        @click=\"handleDel(scope.$index)\"\r\n                                                    >删除</el-button>\r\n                                                </template>\r\n                                            </el-table-column>\r\n                                        </el-table>\r\n                                        <!-- <div class=\"handle-row\">\r\n                                            <el-button type=\"danger\">删除全部</el-button>\r\n                                        </div>-->\r\n                                    </template>\r\n                                </el-tab-pane>\r\n                                <el-tab-pane :label=\"`回收站(${recycle.length})`\" name=\"third\">\r\n                                    <template v-if=\"message === 'third'\">\r\n                                        <el-table\r\n                                            :data=\"recycle\"\r\n                                            :show-header=\"false\"\r\n                                            style=\"width: 100%\"\r\n                                        >\r\n                                            <el-table-column>\r\n                                                <template slot-scope=\"scope\">\r\n                                                    <span class=\"message-title\">{{scope.row.title}}</span>\r\n                                                </template>\r\n                                            </el-table-column>\r\n                                            <el-table-column prop=\"date\" width=\"150\"></el-table-column>\r\n                                            <el-table-column width=\"120\">\r\n                                                <template slot-scope=\"scope\">\r\n                                                    <el-button\r\n                                                        @click=\"handleRestore(scope.$index)\"\r\n                                                    >还原</el-button>\r\n                                                </template>\r\n                                            </el-table-column>\r\n                                        </el-table>\r\n                                        <!-- <div class=\"handle-row\">\r\n                                            <el-button type=\"danger\">清空回收站</el-button>\r\n                                        </div>-->\r\n                                    </template>\r\n                                </el-tab-pane>\r\n                            </el-tabs>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row>\r\n            <el-card shadow=\"hover\">\r\n                <schart ref=\"line\" class=\"schart\" canvasId=\"line\" :options=\"options2\"></schart>\r\n            </el-card>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Schart from 'vue-schart';\r\nimport bus from '../common/bus';\r\nexport default {\r\n    name: 'dashboard',\r\n\r\n    data() {\r\n        return {\r\n            message: 'first',\r\n            showHeader: false,\r\n            unread: [\r\n                {\r\n                    date: '2018-04-19 20:00:00',\r\n                    title: '设备1温度过高'\r\n                },\r\n                {\r\n                    date: '2018-04-19 21:00:00',\r\n                    title: '设备2温度过高'\r\n                },\r\n                {\r\n                    date: '2018-04-19 21:00:00',\r\n                    title: '设备3温度过高'\r\n                },\r\n                {\r\n                    date: '2018-04-19 21:00:00',\r\n                    title: '设备4温度过高'\r\n                }\r\n            ],\r\n            read: [\r\n                {\r\n                    date: '2018-04-19 20:00:00',\r\n                    title: '设备1温度过高'\r\n                }\r\n            ],\r\n            recycle: [\r\n                {\r\n                    date: '2018-04-19 20:00:00',\r\n                    title: '设备1温度过高'\r\n                }\r\n            ],\r\n            name: localStorage.getItem('ms_username'),\r\n            // todoList: [\r\n            //     {\r\n            //         title: '设备1温度过高',\r\n            //         status: false,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     },\r\n            //     {\r\n            //         title: '设备2温度过高',\r\n            //         status: true,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     },\r\n            //     {\r\n            //         title: '设备1断电',\r\n            //         status: false,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     },\r\n            //     {\r\n            //         title: '设备1故障',\r\n            //         status: false,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     },\r\n            //     {\r\n            //         title: '设备2故障',\r\n            //         status: true,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     },\r\n            //     {\r\n            //         title: '设备1故障',\r\n            //         status: false,\r\n            //         alarmTime: '2020-05-15 14:00:00'\r\n            //     }\r\n            //     // {\r\n            //     //     title: '设备2故障',\r\n            //     //     status: true,\r\n            //     //     alarmTime: '2020-05-15 14:00:00'\r\n            //     // },\r\n            //     // {\r\n            //     //     title: '设备2故障',\r\n            //     //     status: true,\r\n            //     //     alarmTime: '2020-05-15 14:00:00'\r\n            //     // },\r\n            //     // {\r\n            //     //     title: '设备1故障',\r\n            //     //     status: false,\r\n            //     //     alarmTime: '2020-05-15 14:00:00'\r\n            //     // },\r\n            //     // {\r\n            //     //     title: '设备2故障',\r\n            //     //     status: true,\r\n            //     //     alarmTime: '2020-05-15 14:00:00'\r\n            //     // }\r\n            // ],\r\n\r\n            options: {\r\n                type: 'line',\r\n                title: {\r\n                    text: '最近一月设备报警数'\r\n                },\r\n                xRorate: 25,\r\n                labels: [\r\n                    '01',\r\n                    '02',\r\n                    '03',\r\n                    '04',\r\n                    '05',\r\n                    '06',\r\n                    '07',\r\n                    '08',\r\n                    '09',\r\n                    '10',\r\n                    '11',\r\n                    '12',\r\n                    '13',\r\n                    '14',\r\n                    '15',\r\n                    '16',\r\n                    '17',\r\n                    '18',\r\n                    '19',\r\n                    '20',\r\n                    '21',\r\n                    '22',\r\n                    '23',\r\n                    '24',\r\n                    '25',\r\n                    '26',\r\n                    '27',\r\n                    '28',\r\n                    '29',\r\n                    '30'\r\n                ],\r\n                datasets: [\r\n                    {\r\n                        label: '设备',\r\n                        data: [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2]\r\n                    }\r\n                ]\r\n            },\r\n            options2: {\r\n                type: 'line',\r\n                title: {\r\n                    text: '开机率/故障率趋势图'\r\n                },\r\n                labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n                datasets: [\r\n                    {\r\n                        label: '开机率',\r\n                        data: [78, 4, 15, 65, 89]\r\n                    },\r\n                    {\r\n                        label: '故障率',\r\n                        data: [4, 2, 2, 6, 5]\r\n                    }\r\n                ]\r\n            },\r\n            options3: {\r\n                type: 'pie',\r\n                title: {\r\n                    text: '设备地域分布'\r\n                },\r\n                legend: {\r\n                    position: 'bottom'\r\n                },\r\n                bottomPadding: '10px',\r\n                labels: ['江苏'],\r\n                datasets: [\r\n                    {\r\n                        data: [50]\r\n                    }\r\n                ]\r\n            },\r\n            status: {},\r\n            deviceNum: 0\r\n        };\r\n    },\r\n    created() {\r\n        this.fetchDeviceNum();\r\n        this.fetchDeviceStatus();\r\n    },\r\n    components: {\r\n        Schart\r\n    },\r\n    computed: {\r\n        unreadNum() {\r\n            return this.unread.length;\r\n        },\r\n        role() {\r\n            return this.name === 'admin' ? '超级管理员' : '普通用户';\r\n        }\r\n    },\r\n\r\n    // created() {\r\n    //     this.handleListener();\r\n    //     this.changeDate();\r\n    // },\r\n    // activated() {\r\n    //     this.handleListener();\r\n    // },\r\n    // deactivated() {\r\n    //     window.removeEventListener('resize', this.renderChart);\r\n    //     bus.$off('collapse', this.handleBus);\r\n    // },\r\n    methods: {\r\n        // changeDate() {\r\n        //     const now = new Date().getTime();\r\n        //     this.data.forEach((item, index) => {\r\n        //         const date = new Date(now - (6 - index) * 86400000);\r\n        //         item.name = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\r\n        //     });\r\n        // }\r\n        // handleListener() {\r\n        //     bus.$on('collapse', this.handleBus);\r\n        //     // 调用renderChart方法对图表进行重新渲染\r\n        //     window.addEventListener('resize', this.renderChart);\r\n        // },\r\n        // handleBus(msg) {\r\n        //     setTimeout(() => {\r\n        //         this.renderChart();\r\n        //     }, 200);\r\n        // },\r\n        // renderChart() {\r\n        //     this.$refs.bar.renderChart();\r\n        //     this.$refs.line.renderChart();\r\n        // }\r\n        //获取企业设备数量\r\n        fetchDeviceNum() {\r\n            axios({\r\n                method: 'get',\r\n                url: '/fetchDeviceNum'\r\n            })\r\n                .then(res => {\r\n                    this.deviceNum = res.data.data;\r\n                })\r\n                .catch();\r\n        },\r\n\r\n        //获取企业设备各种状态的数据\r\n        fetchDeviceStatus() {\r\n            axios({\r\n                method: 'get',\r\n                url: '/fetchDeviceStatus'\r\n            })\r\n                .then(res => {\r\n                    this.status = res.data;\r\n                })\r\n                .catch();\r\n        },\r\n        handleRead(index) {\r\n            const item = this.unread.splice(index, 1);\r\n            console.log(item);\r\n            this.read = item.concat(this.read);\r\n        },\r\n        handleDel(index) {\r\n            const item = this.read.splice(index, 1);\r\n            this.recycle = item.concat(this.recycle);\r\n        },\r\n        handleRestore(index) {\r\n            const item = this.recycle.splice(index, 1);\r\n            this.read = item.concat(this.read);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.el-row {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.grid-content {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100px;\r\n}\r\n\r\n.grid-cont-right {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.grid-num {\r\n    font-size: 30px;\r\n    font-weight: bold;\r\n}\r\n\r\n.grid-con-icon {\r\n    font-size: 50px;\r\n    width: 100px;\r\n    height: 100px;\r\n    text-align: center;\r\n    line-height: 100px;\r\n    color: #fff;\r\n}\r\n\r\n.grid-con-1 .grid-con-icon {\r\n    background: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-1 .grid-num {\r\n    color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-2 .grid-con-icon {\r\n    background: rgb(100, 213, 114);\r\n}\r\n\r\n.grid-con-2 .grid-num {\r\n    color: rgb(100, 213, 114);\r\n}\r\n\r\n.grid-con-3 .grid-con-icon {\r\n    background: rgb(242, 94, 67);\r\n}\r\n\r\n.grid-con-3 .grid-num {\r\n    color: rgb(242, 94, 67);\r\n}\r\n.grid-con-4 .grid-con-icon {\r\n    background: rgb(241, 224, 90);\r\n}\r\n\r\n.grid-con-4 .grid-num {\r\n    color: rgb(241, 224, 90);\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    align-items: center;\r\n    padding-bottom: 20px;\r\n    border-bottom: 2px solid #ccc;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.user-avator {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.user-info-cont {\r\n    padding-left: 50px;\r\n    flex: 1;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.user-info-cont div:first-child {\r\n    font-size: 30px;\r\n    color: #222;\r\n}\r\n\r\n.user-info-list {\r\n    font-size: 14px;\r\n    color: #999;\r\n    line-height: 25px;\r\n}\r\n\r\n.user-info-list span {\r\n    margin-left: 70px;\r\n}\r\n\r\n.mgb20 {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.todo-item {\r\n    font-size: 14px;\r\n}\r\n\r\n.todo-item-del {\r\n    text-decoration: line-through;\r\n    color: #999;\r\n}\r\n\r\n.schart {\r\n    width: 100%;\r\n    height: 300px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/page"}]}