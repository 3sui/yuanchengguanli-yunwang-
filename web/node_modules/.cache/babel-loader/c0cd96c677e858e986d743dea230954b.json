{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!D:\\git\\hualiyeya\\web\\src\\plugins\\axios.js","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\plugins\\axios.js","mtime":1594190522378},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["/*\r\n * @Author: your name\r\n * @Date: 2020-05-08 10:56:38\r\n * @LastEditTime: 2020-07-07 00:55:27\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\vue-manage-system\\src\\plugins\\axios.js\r\n */\n\"use strict\";\n\nimport Vue from 'vue';\nimport axios from \"axios\";\nimport router from \"../router/index\"; // Full config:  https://github.com/axios/axios#request-config\n\naxios.defaults.baseURL = process.env.baseURL || process.env.apiUrl || ''; // axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n\nvar config = {\n  // baseURL: 'http://localhost:8890/api',\n  baseURL: 'http://58.216.47.108:8890/api',\n  // baseURL: process.env.baseURL || process.env.apiUrl || \"\",\n  timeout: 60 * 1000 // Timeout\n  // withCredentials: true // Check cross-site Access-Control\n\n};\n\nvar _axios = axios.create(config);\n\n_axios.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  console.log(config);\n\n  if (localStorage.token) {\n    config.headers.Authorization = 'Bearer ' + localStorage.token;\n  }\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  return Promise.reject(error);\n}); // Add a response interceptor\n\n\n_axios.interceptors.response.use(function (response) {\n  // Do something with response data\n  return response;\n}, function (error) {\n  // Do something with response error\n  // window.console.log(error.response);\n  if (error.response.data.message) {\n    Vue.prototype.$message({\n      type: 'error',\n      message: error.response.data.message\n    });\n    window.console.log(error.response.status);\n\n    if (error.response.status === 401) {\n      router.push('/login');\n    } else if (error.response.status === 403) {\n      router.push('/403'); // Vue.router.push('403')\n      // console.log(router)\n    }\n  }\n\n  return Promise.reject(error);\n});\n\nPlugin.install = function (Vue, options) {\n  Vue.axios = _axios;\n  window.axios = _axios;\n  Object.defineProperties(Vue.prototype, {\n    axios: {\n      get: function get() {\n        return _axios;\n      }\n    },\n    $axios: {\n      get: function get() {\n        return _axios;\n      }\n    }\n  });\n};\n\nVue.use(Plugin);\nexport default Plugin;",{"version":3,"sources":["D:/git/hualiyeya/web/src/plugins/axios.js"],"names":["Vue","axios","router","defaults","baseURL","process","env","apiUrl","config","timeout","_axios","create","interceptors","request","use","console","log","localStorage","token","headers","Authorization","error","Promise","reject","response","data","message","prototype","$message","type","window","status","push","Plugin","install","options","Object","defineProperties","get","$axios"],"mappings":"AAAA;;;;;;;;AAQA;;AAEA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,wB,CAEA;;AACAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyBC,OAAO,CAACC,GAAR,CAAYF,OAAZ,IAAuBC,OAAO,CAACC,GAAR,CAAYC,MAAnC,IAA6C,EAAtE,C,CACA;AACA;;AAEA,IAAIC,MAAM,GAAG;AACX;AACAJ,EAAAA,OAAO,EAAE,+BAFE;AAIX;AACAK,EAAAA,OAAO,EAAE,KAAK,IALH,CAKS;AACpB;;AANW,CAAb;;AASA,IAAMC,MAAM,GAAGT,KAAK,CAACU,MAAN,CAAaH,MAAb,CAAf;;AAEAE,MAAM,CAACE,YAAP,CAAoBC,OAApB,CAA4BC,GAA5B,CACE,UAAUN,MAAV,EAAkB;AAChB;AACAO,EAAAA,OAAO,CAACC,GAAR,CAAYR,MAAZ;;AACA,MAAIS,YAAY,CAACC,KAAjB,EAAwB;AACtBV,IAAAA,MAAM,CAACW,OAAP,CAAeC,aAAf,GAA+B,YAAYH,YAAY,CAACC,KAAxD;AACD;;AACD,SAAOV,MAAP;AACD,CARH,EASE,UAAUa,KAAV,EAAiB;AACf;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAZH,E,CAeA;;;AACAX,MAAM,CAACE,YAAP,CAAoBY,QAApB,CAA6BV,GAA7B,CACE,UAAUU,QAAV,EAAoB;AAClB;AACA,SAAOA,QAAP;AACD,CAJH,EAKE,UAAUH,KAAV,EAAiB;AACf;AACA;AACA,MAAIA,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBC,OAAxB,EAAiC;AAC7B1B,IAAAA,GAAG,CAAC2B,SAAJ,CAAcC,QAAd,CAAuB;AACrBC,MAAAA,IAAI,EAAE,OADe;AAErBH,MAAAA,OAAO,EAAEL,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBC;AAFR,KAAvB;AAIFI,IAAAA,MAAM,CAACf,OAAP,CAAeC,GAAf,CAAmBK,KAAK,CAACG,QAAN,CAAeO,MAAlC;;AACA,QAAIV,KAAK,CAACG,QAAN,CAAeO,MAAf,KAA0B,GAA9B,EAAmC;AACjC7B,MAAAA,MAAM,CAAC8B,IAAP,CAAY,QAAZ;AACD,KAFD,MAEO,IAAIX,KAAK,CAACG,QAAN,CAAeO,MAAf,KAA0B,GAA9B,EAAmC;AACxC7B,MAAAA,MAAM,CAAC8B,IAAP,CAAY,MAAZ,EADwC,CAExC;AACA;AACD;AACF;;AACD,SAAOV,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAvBH;;AA0BAY,MAAM,CAACC,OAAP,GAAiB,UAAUlC,GAAV,EAAemC,OAAf,EAAwB;AACvCnC,EAAAA,GAAG,CAACC,KAAJ,GAAYS,MAAZ;AACAoB,EAAAA,MAAM,CAAC7B,KAAP,GAAeS,MAAf;AACA0B,EAAAA,MAAM,CAACC,gBAAP,CAAwBrC,GAAG,CAAC2B,SAA5B,EAAuC;AACrC1B,IAAAA,KAAK,EAAE;AACLqC,MAAAA,GADK,iBACC;AACJ,eAAO5B,MAAP;AACD;AAHI,KAD8B;AAMrC6B,IAAAA,MAAM,EAAE;AACND,MAAAA,GADM,iBACA;AACJ,eAAO5B,MAAP;AACD;AAHK;AAN6B,GAAvC;AAYD,CAfD;;AAiBAV,GAAG,CAACc,GAAJ,CAAQmB,MAAR;AAEA,eAAeA,MAAf","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2020-05-08 10:56:38\r\n * @LastEditTime: 2020-07-07 00:55:27\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\vue-manage-system\\src\\plugins\\axios.js\r\n */\r\n\"use strict\";\r\n\r\nimport Vue from 'vue';\r\nimport axios from \"axios\";\r\nimport router from '../router/index'\r\n\r\n// Full config:  https://github.com/axios/axios#request-config\r\naxios.defaults.baseURL = process.env.baseURL || process.env.apiUrl || '';\r\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\r\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nlet config = {\r\n  // baseURL: 'http://localhost:8890/api',\r\n  baseURL: 'http://58.216.47.108:8890/api',\r\n\r\n  // baseURL: process.env.baseURL || process.env.apiUrl || \"\",\r\n  timeout: 60 * 1000, // Timeout\r\n  // withCredentials: true // Check cross-site Access-Control\r\n};\r\n\r\nconst _axios = axios.create(config);\r\n\r\n_axios.interceptors.request.use(\r\n  function (config) {\r\n    // Do something before request is sent\r\n    console.log(config)\r\n    if (localStorage.token) {\r\n      config.headers.Authorization = 'Bearer ' + localStorage.token\r\n    }\r\n    return config;\r\n  },\r\n  function (error) {\r\n    // Do something with request error\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add a response interceptor\r\n_axios.interceptors.response.use(\r\n  function (response) {\r\n    // Do something with response data\r\n    return response;\r\n  },\r\n  function (error) {\r\n    // Do something with response error\r\n    // window.console.log(error.response);\r\n    if (error.response.data.message) {\r\n        Vue.prototype.$message({\r\n          type: 'error',\r\n          message: error.response.data.message\r\n        })\r\n      window.console.log(error.response.status);\r\n      if (error.response.status === 401) {\r\n        router.push('/login')\r\n      } else if (error.response.status === 403) {\r\n        router.push('/403')\r\n        // Vue.router.push('403')\r\n        // console.log(router)\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nPlugin.install = function (Vue, options) {\r\n  Vue.axios = _axios;\r\n  window.axios = _axios;\r\n  Object.defineProperties(Vue.prototype, {\r\n    axios: {\r\n      get() {\r\n        return _axios;\r\n      }\r\n    },\r\n    $axios: {\r\n      get() {\r\n        return _axios;\r\n      }\r\n    },\r\n  });\r\n};\r\n\r\nVue.use(Plugin)\r\n\r\nexport default Plugin;"]}]}