{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\MaintenanceDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\MaintenanceDetails.vue","mtime":1592476003867},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'MaintenanceDetails',\r\n    data() {\r\n        return {\r\n            // tableData: {},\r\n            url: 'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\r\n            srcList: [\r\n                'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\r\n                'https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg',\r\n                'https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg'\r\n            ],\r\n            deviceDetail: {},\r\n\r\n            form: {\r\n                id: '',\r\n                type: '',\r\n                phenomenon: '',\r\n                cause: '',\r\n                methods: '',\r\n                cost: '',\r\n                repair_person: '',\r\n                repair_person_phone: '',\r\n                more: ''\r\n            },\r\n            faultType: [],\r\n            choosefault: [],\r\n            editEnable: true,\r\n            saveEnable: true\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n    created() {\r\n        this.getDeviceIDAndInfo();\r\n        this.getFaultType();\r\n    },\r\n    methods: {\r\n        //获取故障类型、故障现象选项\r\n        getFaultType() {\r\n            this.$axios\r\n                .get('/FaultTypeChoose')\r\n                .then(res => {\r\n                    console.log(res.data);\r\n                    this.faultType = res.data;\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n\r\n        //处理选择故障类型和故障现象\r\n        handelchoosefault() {\r\n            // console.log(1);\r\n            for (var i = 0; i < this.faultType.length; i++) {\r\n                if (this.faultType[i].fault_type === this.form.type) {\r\n                    this.choosefault = this.faultType[i].fault_phenomenon;\r\n                }\r\n            }\r\n        },\r\n        getDeviceIDAndInfo() {\r\n            // window.console.log(this.$route.query.id);\r\n            axios({\r\n                method: 'get',\r\n                url: '/RepairInfo',\r\n                params: {\r\n                    id: this.$route.query.id\r\n                }\r\n            })\r\n                .then(res => {\r\n                    this.deviceDetail = res.data[0];\r\n                    this.form = res.data[0];\r\n                })\r\n                .catch();\r\n        },\r\n        //提交\r\n        handelEdit() {\r\n            this.editEnable = false;\r\n            this.saveEnable = false;\r\n        },\r\n\r\n        //保存\r\n        onSubmit() {\r\n            let query = {\r\n                id: this.form.id,\r\n                type: this.form.type,\r\n                phenomenon: this.form.phenomenon,\r\n                cause: this.form.cause,\r\n                methods: this.form.methods,\r\n                cost: this.form.cost,\r\n                repair_person: this.form.repair_person,\r\n                repair_person_phone: this.form.repair_person_phone,\r\n                more: this.form.more\r\n            };\r\n            this.$axios\r\n                .post('UpdateRepair', query)\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.$message.success('保存成功');\r\n                        this.$router.go(-1);\r\n                    }\r\n                })\r\n\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n\r\n        //取消\r\n        Cancel() {\r\n            // console.log('submit!');\r\n            this.$router.go(-1);\r\n            // this.deviceDetail={}\r\n\r\n            // this.form={}\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["MaintenanceDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"MaintenanceDetails.vue","sourceRoot":"src/components/deviceRecord","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2020-05-06 10:56:10\r\n * @LastEditTime: 2020-06-16 17:43:24\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 维修记录\r\n * @FilePath: \\vue-manage-system\\src\\components\\view\\ProductDetails.vue\r\n -->\r\n<!--  -->\r\n<template>\r\n    <div class>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-copy\"></i> 设备档案\r\n                </el-breadcrumb-item>\r\n                <el-breadcrumb-item>维修详情</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <!-- <el-button type=\"primary\" class=\"handle-del mr10 mb-30\" @click=\"$router.go(-1)\">返回</el-button>\r\n            <el-button type=\"primary\" class=\"handle-del mr10 mb-30\" @click=\"handelEdit\">编辑</el-button>-->\r\n            <div class=\"plugins-tips\">设备维修详情</div>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"6\">\r\n                    <div class=\"demo-image__preview\">\r\n                        <el-image\r\n                            style=\"width: 320px; height: 160px\"\r\n                            :src=\"url\"\r\n                            :preview-src-list=\"srcList\"\r\n                        ></el-image>\r\n                    </div>\r\n\r\n                    <div class=\"keyvalue\">客户名称：{{deviceDetail.enterprise_name}}</div>\r\n                    <div class=\"keyvalue\">设备ID：{{deviceDetail.eq}}</div>\r\n                    <div class=\"keyvalue\">设备种类：{{deviceDetail.typename}}</div>\r\n                    <div class=\"keyvalue\">设备名称：{{deviceDetail.device_name}}</div>\r\n                    <div class=\"keyvalue\">设备厂家：{{deviceDetail.device_supplier}}</div>\r\n                    <div class=\"keyvalue\">设备型号：{{deviceDetail.device_model}}</div>\r\n                    <div class=\"keyvalue\">安装地址：{{deviceDetail.address}}</div>\r\n                </el-col>\r\n                <el-col :span=\"14\" :offset=\"1\">\r\n                    <el-form\r\n                        ref=\"form\"\r\n                        :model=\"form\"\r\n                        label-width=\"80px\"\r\n                        size=\"mini\"\r\n                        :disabled=\"editEnable\"\r\n                    >\r\n                        <el-form-item label=\"故障类型\">\r\n                            <el-select\r\n                                v-model=\"form.type\"\r\n                                placeholder=\"请选择故障类型\"\r\n                                @change=\"handelchoosefault\"\r\n                            >\r\n                                <el-option\r\n                                    v-for=\"(type,index) in faultType\"\r\n                                    :label=\"type.fault_type\"\r\n                                    :value=\"type.fault_type\"\r\n                                    :key=\"index\"\r\n                                ></el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"故障现象\">\r\n                            <el-select v-model=\"form.phenomenon\" placeholder=\"请选择故障现象\">\r\n                                <el-option\r\n                                    v-for=\"phenomenon in choosefault\"\r\n                                    :label=\"phenomenon\"\r\n                                    :value=\"phenomenon\"\r\n                                    :key=\"phenomenon\"\r\n                                ></el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"原因\" prop=\"cause\">\r\n                            <el-input v-model=\"form.cause\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"排除方法\" prop=\"methods\">\r\n                            <el-input v-model=\"form.methods\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"费用\" prop=\"cost\">\r\n                            <el-input v-model=\"form.cost\" type=\"text\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"维修人\" prop=\"repair_person\">\r\n                            <el-input v-model=\"form.repair_person\" type=\"text\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"联系电话\" prop=\"repair_person_phone\">\r\n                            <el-input v-model=\"form.repair_person_phone\" type=\"text\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"备注\" prop=\"more\">\r\n                            <el-input v-model=\"form.more\" type=\"text\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"维修时间\" prop=\"created_time\">\r\n                            <el-input v-model=\"form.created_time\" type=\"text\" disabled></el-input>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                    <el-row :gutter=\"20\">\r\n                        <el-col :offset=\"6\" :span=\"3\">\r\n                            <el-button type=\"primary\" size=\"meduim\" @click=\"handelEdit\">编辑</el-button>\r\n                        </el-col>\r\n                        <el-col :offset=\"2\" :span=\"3\">\r\n                            <el-button\r\n                                type=\"primary\"\r\n                                size=\"meduim\"\r\n                                @click=\"onSubmit\"\r\n                                :disabled=\"saveEnable\"\r\n                            >保存</el-button>\r\n                        </el-col>\r\n                        <el-col :offset=\"2\" :span=\"3\">\r\n                            <el-button type=\"primary\" size=\"meduim\" @click=\"Cancel\">取消</el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'MaintenanceDetails',\r\n    data() {\r\n        return {\r\n            // tableData: {},\r\n            url: 'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\r\n            srcList: [\r\n                'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\r\n                'https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg',\r\n                'https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg'\r\n            ],\r\n            deviceDetail: {},\r\n\r\n            form: {\r\n                id: '',\r\n                type: '',\r\n                phenomenon: '',\r\n                cause: '',\r\n                methods: '',\r\n                cost: '',\r\n                repair_person: '',\r\n                repair_person_phone: '',\r\n                more: ''\r\n            },\r\n            faultType: [],\r\n            choosefault: [],\r\n            editEnable: true,\r\n            saveEnable: true\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n    created() {\r\n        this.getDeviceIDAndInfo();\r\n        this.getFaultType();\r\n    },\r\n    methods: {\r\n        //获取故障类型、故障现象选项\r\n        getFaultType() {\r\n            this.$axios\r\n                .get('/FaultTypeChoose')\r\n                .then(res => {\r\n                    console.log(res.data);\r\n                    this.faultType = res.data;\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n\r\n        //处理选择故障类型和故障现象\r\n        handelchoosefault() {\r\n            // console.log(1);\r\n            for (var i = 0; i < this.faultType.length; i++) {\r\n                if (this.faultType[i].fault_type === this.form.type) {\r\n                    this.choosefault = this.faultType[i].fault_phenomenon;\r\n                }\r\n            }\r\n        },\r\n        getDeviceIDAndInfo() {\r\n            // window.console.log(this.$route.query.id);\r\n            axios({\r\n                method: 'get',\r\n                url: '/RepairInfo',\r\n                params: {\r\n                    id: this.$route.query.id\r\n                }\r\n            })\r\n                .then(res => {\r\n                    this.deviceDetail = res.data[0];\r\n                    this.form = res.data[0];\r\n                })\r\n                .catch();\r\n        },\r\n        //提交\r\n        handelEdit() {\r\n            this.editEnable = false;\r\n            this.saveEnable = false;\r\n        },\r\n\r\n        //保存\r\n        onSubmit() {\r\n            let query = {\r\n                id: this.form.id,\r\n                type: this.form.type,\r\n                phenomenon: this.form.phenomenon,\r\n                cause: this.form.cause,\r\n                methods: this.form.methods,\r\n                cost: this.form.cost,\r\n                repair_person: this.form.repair_person,\r\n                repair_person_phone: this.form.repair_person_phone,\r\n                more: this.form.more\r\n            };\r\n            this.$axios\r\n                .post('UpdateRepair', query)\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.$message.success('保存成功');\r\n                        this.$router.go(-1);\r\n                    }\r\n                })\r\n\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n\r\n        //取消\r\n        Cancel() {\r\n            // console.log('submit!');\r\n            this.$router.go(-1);\r\n            // this.deviceDetail={}\r\n\r\n            // this.form={}\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\nth {\r\n    background-color: #eef1f6;\r\n    padding: 5px 10px;\r\n}\r\ntd {\r\n    padding: 5px 10px;\r\n}\r\np {\r\n    line-height: 25px;\r\n}\r\n.ml-50 {\r\n    margin-left: 50px;\r\n}\r\n.mb-30 {\r\n    margin-bottom: 30px;\r\n}\r\n.mt-10 {\r\n    margin-top: 10px;\r\n}\r\n.annex img {\r\n    margin: 10px 10px;\r\n    vertical-align: middle;\r\n}\r\n\r\n.plugins-tips {\r\n    font-size: 16px;\r\n    margin: 10px auto;\r\n}\r\n.keyvalue {\r\n    font-size: 12px;\r\n    text-align: left;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    line-height: 40px;\r\n    height: 40px;\r\n    margin-top: 5px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n.buttonbox {\r\n    /* height: 40px; */\r\n    margin: 20px auto;\r\n}\r\n</style>"]}]}