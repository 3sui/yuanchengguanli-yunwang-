{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\Analysis\\DeviceAnalysis.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\Analysis\\DeviceAnalysis.vue","mtime":1592905485764},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nlet echarts = require('echarts/lib/echarts');\r\nexport default {\r\n    name: 'DeviceAnalysis',\r\n    data() {\r\n        return {\r\n            datepick: '',\r\n            deviceTop: [],\r\n            //     {\r\n            //         sort: 1,\r\n            //         device_type: '干燥设备',\r\n            //         count: 247\r\n            //     },\r\n            //     {\r\n            //         sort: 2,\r\n            //         device_type: '电机设备',\r\n            //         count: 180\r\n            //     },\r\n            //     {\r\n            //         sort: 3,\r\n            //         device_type: '钣金设备',\r\n            //         count: 140\r\n            //     },\r\n            //     {\r\n            //         sort: 4,\r\n            //         device_type: '数控机床',\r\n            //         count: 93\r\n            //     },\r\n            //     {\r\n            //         sort: 5,\r\n            //         device_type: '智能设备',\r\n            //         count: 48\r\n            //     },\r\n            //     {\r\n            //         sort: 6,\r\n            //         device_type: '三哑设备',\r\n            //         count: 35\r\n            //     }\r\n            // ],\r\n            style: ['s1', 's2', 's3', 's4'],\r\n            backgroundstyle: ['b1', 'b2', 'b3', 'b4'],\r\n            devicetypelist: [],\r\n            devicedatalist: []\r\n        };\r\n    },\r\n    created() {\r\n        this.getDeviceTypes();\r\n    },\r\n    mounted() {\r\n        this.getChart3();\r\n    },\r\n    methods: {\r\n        //获取设备类型设备数量数据\r\n        getDeviceTypes() {\r\n            this.$axios\r\n                .get('DeviceByType')\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.deviceTop = res.data;\r\n                        console.log(this.deviceTop);\r\n                    }\r\n                })\r\n                .then(() => {\r\n                    this.getdata();\r\n                    this.getChart3();\r\n                })\r\n\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        //获取数据\r\n        getdata() {\r\n            this.devicetypelist = [];\r\n            this.devicedatalist = [];\r\n            for (let i = 0; i < this.deviceTop.length; i++) {\r\n                let item = this.deviceTop[i];\r\n                this.devicetypelist.push(item.device_type);\r\n                let devicedata = {\r\n                    value: item.count,\r\n                    name: item.device_type\r\n                };\r\n                this.devicedatalist.push(devicedata);\r\n            }\r\n        },\r\n        //获取图表1\r\n        getChart3() {\r\n            let myChart = this.$echarts.init(document.getElementById('byDeviceType'));\r\n            // 指定图表的配置项和数据\r\n\r\n            let option = {\r\n                title: {\r\n                    text: '设备类型数量分布图',\r\n                    left: '40%'\r\n                },\r\n                color: ['#8378EA', '#E7BCF3', '#FB7293', '#FF9F7F', '#9FE6B8', '#32C5E9', '#4B7CF3', '#EB6379', '#068687', '#82DACA'],\r\n                backgroundColor: '#fff',\r\n                legend: {\r\n                    orient: 'vertical',\r\n                    top: 'center',\r\n                    right: '5%',\r\n\r\n                    data: this.devicetypelist,\r\n                    textStyle: {\r\n                        color: '#000',\r\n                        fontSize: 16\r\n                    }\r\n                },\r\n                toolbox: {\r\n                    show: true,\r\n                    feature: {\r\n                        saveAsImage: {}\r\n                    }\r\n                },\r\n                grid: {\r\n                    left: 150,\r\n                    bottom: 30\r\n                },\r\n\r\n                tooltip: {\r\n                    trigger: 'item',\r\n                    formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n                },\r\n                series: [\r\n                    {\r\n                        name: '设备类型',\r\n                        type: 'pie',\r\n                        radius: ['20%', '65%'], //半径\r\n                        center: ['40%', '60%'], //位置\r\n                        roseType: 'radius',\r\n                        label: {\r\n                            show: true,\r\n                            normal: {\r\n                                position: 'outside',\r\n                                fontSize: 16\r\n                            }\r\n                        },\r\n                        labelLine: {\r\n                            length: 1,\r\n                            length2: 20,\r\n                            smooth: true\r\n                        },\r\n                        data: this.devicedatalist\r\n                    }\r\n                ]\r\n            };\r\n            // 使用刚指定的配置项和数据显示图表。\r\n            myChart.setOption(option);\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["DeviceAnalysis.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceAnalysis.vue","sourceRoot":"src/components/Analysis","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-cascades\"></i> 分析中心\r\n                </el-breadcrumb-item>\r\n                <el-breadcrumb-item>设备分析</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <!-- <el-row :gutter=\"20\" class=\"mgb20\">\r\n                <el-col :span=\"6\">\r\n                    <div class=\"block\">\r\n                        <span class=\"demonstration\"></span>\r\n                        <el-date-picker\r\n                            v-model=\"datepick\"\r\n                            type=\"daterange\"\r\n                            align=\"right\"\r\n                            unlink-panels\r\n                            range-separator=\"-\"\r\n                            start-placeholder=\"开始日期\"\r\n                            end-placeholder=\"结束日期\"\r\n                            \r\n                        ></el-date-picker>\r\n                    </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\">查询报表</el-button>\r\n                    <el-button type=\"primary\" icon=\"el-icon-download\">导出报表</el-button>\r\n                </el-col>\r\n            </el-row>-->\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"6\" v-for=\"(device,index) in deviceTop\" :key=\"index\">\r\n                    <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\" v-if=\"index<4\">\r\n                        <div class=\"grid-content grid-con\">\r\n                            <!-- <i class=\"grid-con-icon\" :class=\"backgroundstyle[index]\">{{device.sort}}</i>\r\n                            -->\r\n                            <div\r\n                                class=\"card-title\"\r\n                                :class=\"backgroundstyle[index]\"\r\n                            >{{device.device_type}}</div>\r\n                            <div class=\"grid-cont-right\">\r\n                                <div :class=\"style[index]\" class=\"grid-num\">{{device.count}}</div>\r\n                                <div class=\"grid_dev\">设备数</div>\r\n                            </div>\r\n                        </div>\r\n                    </el-card>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n        <div class=\"container\" style=\"margin-top:10px\">\r\n            <el-row :gutter=\"20\" class=\"mgb20\">\r\n                <el-col :span=\"12\">\r\n                    <div id=\"byDeviceType\" style=\"height: 480px; width: 100%;\"></div>\r\n                </el-col>\r\n\r\n                <el-col :span=\"12\">\r\n                    <el-table :data=\"deviceTop\" height=\"480px\" border style=\"width: 100%\">\r\n                        <el-table-column prop=\"sort\" label=\"序号\" width=\"180\" align=\"center\"></el-table-column>\r\n                        <el-table-column prop=\"device_type\" label=\"设备种类\" width=\"180\" align=\"center\"></el-table-column>\r\n                        <el-table-column prop=\"count\" label=\"设备数量\" align=\"center\"></el-table-column>\r\n                    </el-table>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nlet echarts = require('echarts/lib/echarts');\r\nexport default {\r\n    name: 'DeviceAnalysis',\r\n    data() {\r\n        return {\r\n            datepick: '',\r\n            deviceTop: [],\r\n            //     {\r\n            //         sort: 1,\r\n            //         device_type: '干燥设备',\r\n            //         count: 247\r\n            //     },\r\n            //     {\r\n            //         sort: 2,\r\n            //         device_type: '电机设备',\r\n            //         count: 180\r\n            //     },\r\n            //     {\r\n            //         sort: 3,\r\n            //         device_type: '钣金设备',\r\n            //         count: 140\r\n            //     },\r\n            //     {\r\n            //         sort: 4,\r\n            //         device_type: '数控机床',\r\n            //         count: 93\r\n            //     },\r\n            //     {\r\n            //         sort: 5,\r\n            //         device_type: '智能设备',\r\n            //         count: 48\r\n            //     },\r\n            //     {\r\n            //         sort: 6,\r\n            //         device_type: '三哑设备',\r\n            //         count: 35\r\n            //     }\r\n            // ],\r\n            style: ['s1', 's2', 's3', 's4'],\r\n            backgroundstyle: ['b1', 'b2', 'b3', 'b4'],\r\n            devicetypelist: [],\r\n            devicedatalist: []\r\n        };\r\n    },\r\n    created() {\r\n        this.getDeviceTypes();\r\n    },\r\n    mounted() {\r\n        this.getChart3();\r\n    },\r\n    methods: {\r\n        //获取设备类型设备数量数据\r\n        getDeviceTypes() {\r\n            this.$axios\r\n                .get('DeviceByType')\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.deviceTop = res.data;\r\n                        console.log(this.deviceTop);\r\n                    }\r\n                })\r\n                .then(() => {\r\n                    this.getdata();\r\n                    this.getChart3();\r\n                })\r\n\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        //获取数据\r\n        getdata() {\r\n            this.devicetypelist = [];\r\n            this.devicedatalist = [];\r\n            for (let i = 0; i < this.deviceTop.length; i++) {\r\n                let item = this.deviceTop[i];\r\n                this.devicetypelist.push(item.device_type);\r\n                let devicedata = {\r\n                    value: item.count,\r\n                    name: item.device_type\r\n                };\r\n                this.devicedatalist.push(devicedata);\r\n            }\r\n        },\r\n        //获取图表1\r\n        getChart3() {\r\n            let myChart = this.$echarts.init(document.getElementById('byDeviceType'));\r\n            // 指定图表的配置项和数据\r\n\r\n            let option = {\r\n                title: {\r\n                    text: '设备类型数量分布图',\r\n                    left: '40%'\r\n                },\r\n                color: ['#8378EA', '#E7BCF3', '#FB7293', '#FF9F7F', '#9FE6B8', '#32C5E9', '#4B7CF3', '#EB6379', '#068687', '#82DACA'],\r\n                backgroundColor: '#fff',\r\n                legend: {\r\n                    orient: 'vertical',\r\n                    top: 'center',\r\n                    right: '5%',\r\n\r\n                    data: this.devicetypelist,\r\n                    textStyle: {\r\n                        color: '#000',\r\n                        fontSize: 16\r\n                    }\r\n                },\r\n                toolbox: {\r\n                    show: true,\r\n                    feature: {\r\n                        saveAsImage: {}\r\n                    }\r\n                },\r\n                grid: {\r\n                    left: 150,\r\n                    bottom: 30\r\n                },\r\n\r\n                tooltip: {\r\n                    trigger: 'item',\r\n                    formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n                },\r\n                series: [\r\n                    {\r\n                        name: '设备类型',\r\n                        type: 'pie',\r\n                        radius: ['20%', '65%'], //半径\r\n                        center: ['40%', '60%'], //位置\r\n                        roseType: 'radius',\r\n                        label: {\r\n                            show: true,\r\n                            normal: {\r\n                                position: 'outside',\r\n                                fontSize: 16\r\n                            }\r\n                        },\r\n                        labelLine: {\r\n                            length: 1,\r\n                            length2: 20,\r\n                            smooth: true\r\n                        },\r\n                        data: this.devicedatalist\r\n                    }\r\n                ]\r\n            };\r\n            // 使用刚指定的配置项和数据显示图表。\r\n            myChart.setOption(option);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* .el-row {\r\n    margin-bottom: 10px;\r\n} */\r\n\r\n.grid-content {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 120px;\r\n}\r\n\r\n.grid-cont-right {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #999;\r\n    height: 120px;\r\n}\r\n\r\n.grid-num {\r\n    font-size: 50px;\r\n    font-weight: bold;\r\n    /* margin-bottom: 10px; */\r\n    height: 90px;\r\n    line-height: 90px;\r\n}\r\n.grid_dev {\r\n    font-size: 18px;\r\n}\r\n\r\n.grid-con-icon {\r\n    font-size: 50px;\r\n    width: 120px;\r\n    height: 120px;\r\n    text-align: center;\r\n    line-height: 120px;\r\n    color: #fff;\r\n}\r\n\r\n.card-title {\r\n    text-align: center;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    color: white;\r\n    letter-spacing: 0.5em;\r\n    width: 50%;\r\n    line-height: 120px;\r\n    height: 120px;\r\n    background-color: #f0f0f0;\r\n}\r\n\r\n.s1 {\r\n    color: #eb6379;\r\n}\r\n\r\n.s3 {\r\n    color: #eea03c;\r\n}\r\n\r\n.s2 {\r\n    color: darkturquoise;\r\n}\r\n\r\n.s4 {\r\n    color: #69d3ab;\r\n}\r\n\r\n.b1 {\r\n    background-color: #eb6379;\r\n}\r\n\r\n.b3 {\r\n    background-color: #eea03c;\r\n}\r\n\r\n.b2 {\r\n    background-color: darkturquoise;\r\n}\r\n\r\n.b4 {\r\n    background-color: #69d3ab;\r\n}\r\n.container {\r\n    padding-top: 15px;\r\n    padding-bottom: 15px;\r\n}\r\n</style>"]}]}