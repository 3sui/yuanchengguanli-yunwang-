{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\DeviceSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\deviceRecord\\DeviceSettings.vue","mtime":1593307092858},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'AddNewProduct',\r\n    data() {\r\n        return {\r\n            // options: regionData,\r\n            form: {\r\n                point: [\r\n                    {\r\n                        cp_id: 'cp1',\r\n                        cp_name: '',\r\n                        unit: '',\r\n                        up: '',\r\n                        down: '',\r\n                        limit_up: '',\r\n                        limit_down: ''\r\n                    }\r\n                ],\r\n                eq: ''\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        // this.fetchCaseInfo();\r\n    },\r\n    methods: {\r\n        addNewPoint() {\r\n            if (this.form.point.length > 5) {\r\n                this.$message.error('最多创建6个测点');\r\n                return;\r\n            }\r\n            this.form.point.push({\r\n                cp_id: 'cp' + (this.form.point.length + 1),\r\n                cp_name: '',\r\n                unit: '',\r\n                up: '',\r\n                down: '',\r\n                limit_up: '',\r\n                limit_down: ''\r\n            });\r\n        },\r\n        deletePoint() {\r\n            if (this.form.point.length == 1) {\r\n                return;\r\n            }\r\n            this.form.point.pop();\r\n        },\r\n        submitForm(formName) {\r\n            this.form.eq = this.$route.query;\r\n\r\n            window.console.log(this.form.eq);\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    axios({\r\n                        method: 'post',\r\n                        url: '/device/settings',\r\n                        data: this.form\r\n                    })\r\n                        .then(res => {\r\n                            console.log(res.data);\r\n                            if (res.data.success) {\r\n                                this.$message.success(res.data.message);\r\n                                this.$router.push('/deviceList');\r\n                            }\r\n                        })\r\n                        .catch(err => {});\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["DeviceSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceSettings.vue","sourceRoot":"src/components/deviceRecord","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2020-06-12 09:13:08\r\n * @LastEditTime: 2020-06-28 01:53:50\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\web\\src\\components\\deviceRecord\\DeviceSettings.vue\r\n--> \r\n<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-calendar\"></i> 设备档案\r\n                </el-breadcrumb-item>\r\n                <el-breadcrumb-item>测点配置</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"form-box\">\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\r\n                    <div v-for=\"(item, index) in form.point\" :key=\"index\" class=\"point\">\r\n                        <p class=\"point-title\">测点{{index +1}}</p>\r\n                        <el-form-item label=\"测点标识号\">\r\n                            <el-input v-model=\"item.cp_id\" disabled></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"测点名称\"\r\n                            :prop=\"'point.'+ index  + '.cp_name'\"\r\n                            :rules=\"{\r\n      required: true, message: '测点名称不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.cp_name\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"测点单位\"\r\n                            :prop=\"'point.'+ index  + '.unit'\"\r\n                            :rules=\"{\r\n      required: true, message: '测点单位不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.unit\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- <el-form-item\r\n                            label=\"计算系数值\"\r\n                            :prop=\"'point.'+ index  + '.k'\"\r\n                            :rules=\"{\r\n      required: true, message: '计算系数值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.k\"></el-input>\r\n                        </el-form-item>-->\r\n                        <el-form-item\r\n                            label=\"量程上限值\"\r\n                            :prop=\"'point.'+ index  + '.up'\"\r\n                            :rules=\"{\r\n      required: true, message: '量程上限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.up\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"量程下限值\"\r\n                            :prop=\"'point.'+ index  + '.down'\"\r\n                            :rules=\"{\r\n      required: true, message: '量程下限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.down\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"报警上限值\"\r\n                            :prop=\"'point.'+ index  + '.limit_up'\"\r\n                            :rules=\"{\r\n      required: true, message: '上限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.limit_up\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item\r\n                            label=\"报警下限值\"\r\n                            :prop=\"'point.'+ index  + '.limit_down'\"\r\n                            :rules=\"{\r\n      required: true, message: '下限值不能为空', trigger: 'blur'\r\n    }\"\r\n                        >\r\n                            <el-input v-model=\"item.limit_down\"></el-input>\r\n                        </el-form-item>\r\n                    </div>\r\n                    <div style=\"text-align: right\">\r\n                        <el-button @click=\"submitForm('form')\">提交</el-button>\r\n                        <div style=\"text-align: center\">\r\n                            <el-button @click=\"addNewPoint\">新增</el-button>\r\n                            <el-button @click=\"deletePoint\">删除</el-button>\r\n                        </div>\r\n                    </div>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'AddNewProduct',\r\n    data() {\r\n        return {\r\n            // options: regionData,\r\n            form: {\r\n                point: [\r\n                    {\r\n                        cp_id: 'cp1',\r\n                        cp_name: '',\r\n                        unit: '',\r\n                        up: '',\r\n                        down: '',\r\n                        limit_up: '',\r\n                        limit_down: ''\r\n                    }\r\n                ],\r\n                eq: ''\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        // this.fetchCaseInfo();\r\n    },\r\n    methods: {\r\n        addNewPoint() {\r\n            if (this.form.point.length > 5) {\r\n                this.$message.error('最多创建6个测点');\r\n                return;\r\n            }\r\n            this.form.point.push({\r\n                cp_id: 'cp' + (this.form.point.length + 1),\r\n                cp_name: '',\r\n                unit: '',\r\n                up: '',\r\n                down: '',\r\n                limit_up: '',\r\n                limit_down: ''\r\n            });\r\n        },\r\n        deletePoint() {\r\n            if (this.form.point.length == 1) {\r\n                return;\r\n            }\r\n            this.form.point.pop();\r\n        },\r\n        submitForm(formName) {\r\n            this.form.eq = this.$route.query;\r\n\r\n            window.console.log(this.form.eq);\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    axios({\r\n                        method: 'post',\r\n                        url: '/device/settings',\r\n                        data: this.form\r\n                    })\r\n                        .then(res => {\r\n                            console.log(res.data);\r\n                            if (res.data.success) {\r\n                                this.$message.success(res.data.message);\r\n                                this.$router.push('/deviceList');\r\n                            }\r\n                        })\r\n                        .catch(err => {});\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.form-box {\r\n    margin: 0 auto;\r\n}\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n    border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n}\r\n.avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n}\r\n.point {\r\n    padding: 20px 25px 20px 0;\r\n    border: 1px solid #ebeef5;\r\n    border-radius: 4px;\r\n}\r\n.point-title {\r\n    font-size: 16px;\r\n    margin: 10px 0;\r\n    padding-left: 20px;\r\n}\r\n</style>"]}]}