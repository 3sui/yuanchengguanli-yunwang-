{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\view\\ServiceBooklet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\view\\ServiceBooklet.vue","mtime":1590980248021},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'ServiceBooklet',\r\n    data() {\r\n        return {\r\n            editVisible: false,\r\n            activeName: 0,\r\n            tableData: [],\r\n            form: {},\r\n            form2: {},\r\n            editVisible2: false\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n    created() {\r\n        this.fetchBooklet();\r\n    },\r\n    methods: {\r\n        fetchBooklet() {\r\n            axios({\r\n                method: 'get',\r\n                url: '/fetchBooklet'\r\n            })\r\n                .then(result => {\r\n                    window.console.log(result.data);\r\n                    let arr = [];\r\n                    let a = false;\r\n                    for (let i in result.data) {\r\n                        let obj = {};\r\n\r\n                        for (let j in arr) {\r\n                            if (result.data[i].type === Object.keys(arr[j])[0]) {\r\n                                window.console.log(arr[j]);\r\n                                arr[j][result.data[i].type].push({\r\n                                    function: result.data[i].function,\r\n                                    id: result.data[i].id,\r\n                                    reason: result.data[i].reason\r\n                                });\r\n                                a = true;\r\n                            }\r\n                        }\r\n                        if (a) {\r\n                            a = false;\r\n\r\n                            continue;\r\n                        }\r\n                        obj[result.data[i].type] = [];\r\n                        obj[result.data[i].type].push({\r\n                            function: result.data[i].function,\r\n                            id: result.data[i].id,\r\n                            reason: result.data[i].reason\r\n                        });\r\n                        arr.push(obj);\r\n                    }\r\n                    window.console.log(arr);\r\n                    this.tableData = arr;\r\n                })\r\n                .catch(err => {});\r\n        },\r\n        saveEdit() {\r\n            this.editVisible = false;\r\n            axios({\r\n                method: 'post',\r\n                url: '/addNewBooklet',\r\n                data: this.form\r\n            })\r\n                .then(res => {\r\n                    window.console.log(res.data);\r\n                    this.fetchBooklet();\r\n                })\r\n                .catch(err => {});\r\n        },\r\n\r\n        deleteBooklet(a) {\r\n            window.console.log(a);\r\n            this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    axios({\r\n                        method: 'get',\r\n                        url: '/deleteBooklet',\r\n                        params: {\r\n                            id: a.id\r\n                        }\r\n                    })\r\n                        .then(res => {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: res.data\r\n                            });\r\n                            this.fetchBooklet();\r\n                        })\r\n                        .catch(err => {});\r\n                })\r\n                .catch(err => {});\r\n        },\r\n\r\n        changeBooklet() {\r\n            axios({\r\n                method: 'post',\r\n                url: '/changeBooklet',\r\n                data: {\r\n                    data: this.form2\r\n                }\r\n            })\r\n                .then(res => {\r\n                    window.console.log(res.data);\r\n                    this.fetchBooklet();\r\n                    this.editVisible2 = false;\r\n                })\r\n                .catch(err => {});\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["ServiceBooklet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceBooklet.vue","sourceRoot":"src/components/view","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2020-05-07 14:21:47\r\n * @LastEditTime: 2020-05-18 10:20:47\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 服务手册\r\n * @FilePath: \\vue-manage-system\\src\\components\\view\\ServiceBooklet.vue\r\n -->\r\n<!--  -->\r\n<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-cascades\"></i> 服务手册\r\n                </el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <el-button\r\n                type=\"primary\"\r\n                icon=\"el-icon-plus\"\r\n                class=\"handle-del mr10 mb-30\"\r\n                @click=\"editVisible = true\"\r\n            >添加</el-button>\r\n            <!-- <el-button type=\"primary\" icon=\"el-icon-delete\" class=\"handle-del mr10 mb-30\">导入</el-button> -->\r\n            <el-collapse v-model=\"activeName\" accordion>\r\n                <el-collapse-item\r\n                    v-for=\"(item, index) in tableData\"\r\n                    :key=\"index\"\r\n                    :title=\"Object.keys(item)[0]\"\r\n                    :name=\"index\"\r\n                >\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>可能产生的原因</th>\r\n                                <th>排除办法</th>\r\n                                <th>操作</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody v-for=\"(item2, index2) in item[Object.keys(item)[0]]\" :key=\"index2\">\r\n                            <tr>\r\n                                <td>{{item2.reason}}</td>\r\n                                <td>{{item2.function}}</td>\r\n                                <td>\r\n                                    <el-button\r\n                                        type=\"primary\"\r\n                                        plain\r\n                                        size=\"small\"\r\n                                        @click=\"() => {\r\n                                            editVisible2 = true\r\n                                            form2 = item2\r\n                                        }\"\r\n                                    >编辑</el-button>\r\n                                    <el-button\r\n                                        type=\"primary\"\r\n                                        plain\r\n                                        size=\"small\"\r\n                                        @click=\"deleteBooklet(item2)\"\r\n                                    >删除</el-button>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </el-collapse-item>\r\n            </el-collapse>\r\n        </div>\r\n\r\n        <!-- 添加 -->\r\n        <el-dialog title=\"添加\" :visible.sync=\"editVisible\" width=\"30%\">\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"130px\">\r\n                <el-form-item label=\"故障现象\">\r\n                    <el-input v-model=\"form.type\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"可能产生的原因\">\r\n                    <el-input v-model=\"form.reason\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"排除方法\">\r\n                    <el-input v-model=\"form.function\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"editVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑 -->\r\n        <el-dialog title=\"编辑\" :visible.sync=\"editVisible2\" width=\"30%\">\r\n            <el-form ref=\"form\" :model=\"form2\" label-width=\"130px\">\r\n                <el-form-item label=\"可能产生的原因\">\r\n                    <el-input v-model=\"form2.reason\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"排除方法\">\r\n                    <el-input v-model=\"form2.function\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"editVisible2 = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"changeBooklet\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'ServiceBooklet',\r\n    data() {\r\n        return {\r\n            editVisible: false,\r\n            activeName: 0,\r\n            tableData: [],\r\n            form: {},\r\n            form2: {},\r\n            editVisible2: false\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n    created() {\r\n        this.fetchBooklet();\r\n    },\r\n    methods: {\r\n        fetchBooklet() {\r\n            axios({\r\n                method: 'get',\r\n                url: '/fetchBooklet'\r\n            })\r\n                .then(result => {\r\n                    window.console.log(result.data);\r\n                    let arr = [];\r\n                    let a = false;\r\n                    for (let i in result.data) {\r\n                        let obj = {};\r\n\r\n                        for (let j in arr) {\r\n                            if (result.data[i].type === Object.keys(arr[j])[0]) {\r\n                                window.console.log(arr[j]);\r\n                                arr[j][result.data[i].type].push({\r\n                                    function: result.data[i].function,\r\n                                    id: result.data[i].id,\r\n                                    reason: result.data[i].reason\r\n                                });\r\n                                a = true;\r\n                            }\r\n                        }\r\n                        if (a) {\r\n                            a = false;\r\n\r\n                            continue;\r\n                        }\r\n                        obj[result.data[i].type] = [];\r\n                        obj[result.data[i].type].push({\r\n                            function: result.data[i].function,\r\n                            id: result.data[i].id,\r\n                            reason: result.data[i].reason\r\n                        });\r\n                        arr.push(obj);\r\n                    }\r\n                    window.console.log(arr);\r\n                    this.tableData = arr;\r\n                })\r\n                .catch(err => {});\r\n        },\r\n        saveEdit() {\r\n            this.editVisible = false;\r\n            axios({\r\n                method: 'post',\r\n                url: '/addNewBooklet',\r\n                data: this.form\r\n            })\r\n                .then(res => {\r\n                    window.console.log(res.data);\r\n                    this.fetchBooklet();\r\n                })\r\n                .catch(err => {});\r\n        },\r\n\r\n        deleteBooklet(a) {\r\n            window.console.log(a);\r\n            this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    axios({\r\n                        method: 'get',\r\n                        url: '/deleteBooklet',\r\n                        params: {\r\n                            id: a.id\r\n                        }\r\n                    })\r\n                        .then(res => {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: res.data\r\n                            });\r\n                            this.fetchBooklet();\r\n                        })\r\n                        .catch(err => {});\r\n                })\r\n                .catch(err => {});\r\n        },\r\n\r\n        changeBooklet() {\r\n            axios({\r\n                method: 'post',\r\n                url: '/changeBooklet',\r\n                data: {\r\n                    data: this.form2\r\n                }\r\n            })\r\n                .then(res => {\r\n                    window.console.log(res.data);\r\n                    this.fetchBooklet();\r\n                    this.editVisible2 = false;\r\n                })\r\n                .catch(err => {});\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\nth {\r\n    background-color: #eef1f6;\r\n    padding: 5px 15px;\r\n}\r\ntd {\r\n    padding: 5px 15px;\r\n}\r\ntable {\r\n    margin: 0 auto;\r\n    width: 90%;\r\n    /* border: 1px solid #cdcdcd; */\r\n    text-align: center;\r\n}\r\n.mb-30 {\r\n    margin-bottom: 30px;\r\n}\r\n</style>"]}]}