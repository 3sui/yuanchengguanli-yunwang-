{"remainingRequest":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\hualiyeya\\web\\src\\components\\common\\ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\git\\hualiyeya\\web\\src\\components\\common\\ChangePassword.vue","mtime":1594190522275},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\git\\hualiyeya\\web\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'ChangePassword',\r\n    data() {\r\n        var checkOld = (rule, value, callback) => {\r\n            if (!value) {\r\n                return callback(new Error('请输入密码'));\r\n            }\r\n            callback();\r\n        };\r\n        var checkNew = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请输入密码'));\r\n            } else {\r\n                if (this.ruleForm.checkPass !== '') {\r\n                    this.$refs.ruleForm.validateField('checkPass');\r\n                }\r\n                callback();\r\n            }\r\n        };\r\n        var checkPass = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请再次输入密码'));\r\n            } else if (value !== this.ruleForm.newPass) {\r\n                callback(new Error('两次输入密码不一致!'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            ruleForm: {\r\n                oldPass: '',\r\n                newPass: '',\r\n                checkPass: ''\r\n            },\r\n            rules: {\r\n                oldPass: [{ validator: checkOld, trigger: 'blur' }],\r\n                newPass: [{ validator: checkNew, trigger: 'blur' }],\r\n                checkPass: [{ validator: checkPass, trigger: 'blur' }]\r\n            }\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n\r\n    methods: {\r\n        submitForm(formName) {\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    axios({\r\n                        method: 'post',\r\n                        url: '/login/changePass',\r\n                        data: this.ruleForm\r\n                    }).then(res => {\r\n                        if (res.data.success) {\r\n                            this.$message.success(res.data.message);\r\n                            localStorage.removeItem('ms_username');\r\n                            this.$router.push('/login');\r\n                        } else {\r\n                            this.$message.error(res.data.message);\r\n                            this.$refs[formName].resetFields();\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        resetForm(formName) {\r\n            this.$refs[formName].resetFields();\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/components/common","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2020-07-03 13:33:17\r\n * @LastEditTime: 2020-07-03 15:33:17\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 修改密码页面\r\n * @FilePath: \\远程监控平台\\web\\src\\components\\common\\ChangePassword.vue\r\n--> \r\n\r\n<!--  -->\r\n<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-cascades\"></i> 修改密码\r\n                </el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n\r\n        <div class=\"container\">\r\n            <el-form\r\n                style=\"width: 600px;margin: 0 auto\"\r\n                :model=\"ruleForm\"\r\n                status-icon\r\n                :rules=\"rules\"\r\n                ref=\"ruleForm\"\r\n                label-width=\"100px\"\r\n                class=\"demo-ruleForm\"\r\n            >\r\n                <el-form-item label=\"原密码\" prop=\"oldPass\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.oldPass\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"新密码\" prop=\"newPass\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.newPass\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n                    <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'ChangePassword',\r\n    data() {\r\n        var checkOld = (rule, value, callback) => {\r\n            if (!value) {\r\n                return callback(new Error('请输入密码'));\r\n            }\r\n            callback();\r\n        };\r\n        var checkNew = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请输入密码'));\r\n            } else {\r\n                if (this.ruleForm.checkPass !== '') {\r\n                    this.$refs.ruleForm.validateField('checkPass');\r\n                }\r\n                callback();\r\n            }\r\n        };\r\n        var checkPass = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请再次输入密码'));\r\n            } else if (value !== this.ruleForm.newPass) {\r\n                callback(new Error('两次输入密码不一致!'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            ruleForm: {\r\n                oldPass: '',\r\n                newPass: '',\r\n                checkPass: ''\r\n            },\r\n            rules: {\r\n                oldPass: [{ validator: checkOld, trigger: 'blur' }],\r\n                newPass: [{ validator: checkNew, trigger: 'blur' }],\r\n                checkPass: [{ validator: checkPass, trigger: 'blur' }]\r\n            }\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {},\r\n\r\n    methods: {\r\n        submitForm(formName) {\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    axios({\r\n                        method: 'post',\r\n                        url: '/login/changePass',\r\n                        data: this.ruleForm\r\n                    }).then(res => {\r\n                        if (res.data.success) {\r\n                            this.$message.success(res.data.message);\r\n                            localStorage.removeItem('ms_username');\r\n                            this.$router.push('/login');\r\n                        } else {\r\n                            this.$message.error(res.data.message);\r\n                            this.$refs[formName].resetFields();\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        resetForm(formName) {\r\n            this.$refs[formName].resetFields();\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n"]}]}